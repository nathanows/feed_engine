require "rails_helper"

RSpec.describe PovertyDataGenerator do
  it "creates a StatePovertyData object from the api data arrays" do
    data = [["B17001_001E","B17001_002E","B17001_003E","B17001_004E",
            "B17001_005E","B17001_006E","B17001_007E","B17001_008E",
            "B17001_009E","B17001_010E","B17001_011E","B17001_012E",
            "B17001_013E","B17001_014E","B17001_015E","B17001_016E",
            "B17001_017E","B17001_018E","B17001_019E","B17001_020E",
            "B17001_021E","B17001_022E","B17001_023E","B17001_024E",
            "B17001_025E","B17001_026E","B17001_027E","B17001_028E",
            "B17001_029E","B17001_030E","state"],
           ["4596836","786544","335483","42642",
             "7276","46613","20602","7777",
            "13325","48813","36156","31044",
            "34516","25781","12299","8639",
            "451061","41688","7502","43723",
            "19792","6699","13010","66482",
            "68221","48964","47968","36666",
            "22773","27573","01"]]
    PovertyDataGenerator.call(data, 2010)
    expect(StatePovertyData.count).to eql(1)
  end

  
end
